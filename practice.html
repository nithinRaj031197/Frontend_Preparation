<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .add {
        color: rgb(77, 161, 230);
      }
    </style>
  </head>
  <body>
    <script>
      // const arr = [1, 2, 3, 4, 5];

      // Array.prototype.myMap = function (callbackFn) {
      //   const res = [];

      //   for (let i = 0; i < this.length; i++) {
      //     res.push(callbackFn(this[i], i, this));
      //   }

      //   return res;
      // };

      // const newArr = arr.myMap((item, index, array) => {
      //   return item * 2;
      // });

      // console.log(newArr);

      // const arr = [1, 2, 3, 4, 5];

      // if (!Array.prototype.myFilter) {
      //   Array.prototype.myFilter = function (callbackFn) {
      //     const res = [];

      //     for (let i = 0; i < this.length; i++) {
      //       if (callbackFn(this[i], i, this)) {
      //         res.push(this[i]);
      //       }
      //     }

      //     return res;
      //   };
      // }

      // const filterArr = arr.myFilter((item, index, array) => {
      //   return item !== 4;
      // });

      // console.log(filterArr);

      // const arr = [1, 2, 3, 4, 5];

      // if (!Array.prototype.myReduce) {
      //   Array.prototype.myReduce = function (callbackFn, initialValue) {
      //     let prev = initialValue === undefined ? this[0] : initialValue;
      //     let startIndex = initialValue === undefined ? 1 : 0;

      //     for (let i = startIndex; i < this.length; i++) {
      //       prev = callbackFn(prev, this[i], i, this);
      //     }
      //     return prev;
      //   };
      // }

      // const total = arr.myReduce((prevValue, currValue, currIndex, array) => {
      //   return prevValue + currValue;
      // });

      // console.log(total);

      // const arr = [1, [2, 3, [4, 5, [1], 6], 4], [9, 7, 0, [2, 3]]];

      // // const newArr = arr.flat(1);

      // Array.prototype.myFlat = function (depth = 1) {
      //   let res = [];

      //   function flatten(A, d) {
      //     for (let i = 0; i < A.length; i++) {
      //       if (Array.isArray(A[i]) && d < depth) {
      //         flatten(A[i], d + 1);
      //       } else {
      //         res.push(A[i]);
      //       }
      //     }
      //   }

      //   flatten(this, 0);

      //   return res;
      // };
      // const newArr = arr.myFlat(3);
      // console.log(newArr);

      function myTrottle(fn, delay) {
        let isThrottle;
        return function () {
          if (!isThrottle) {
            fn.apply(this, arguments);
            isThrottle = true;
            setTimeout(() => {
              isThrottle = false;
            }, delay);
          }
        };
      }

      function logMessage(v) {
        console.log("Throttled", v);
      }

      const throttle = myTrottle((v) => logMessage(v), 500);

      throttle(1);
      setTimeout(() => {
        throttle(2);
      }, 200);
      setTimeout(() => {
        throttle(3);
      }, 400);
    </script>
  </body>
</html>
